<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fee Status | SVITS ERP</title>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">

    <style>
        /* =========================================
           FIX 1: DASHBOARD LAYOUT (Sidebar Fix)
           ========================================= */
        :root {
            --sidebar-width: 260px;
            --header-height: 70px;
            --primary-color: #004a99;
            --accent-color: #007bff;
            --text-dark: #333;
            --bg-light: #f4f7f6;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
        }

        body {
            background-color: var(--bg-light);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        /* Sidebar: Fixed to Left */
        .sidebar {
            width: var(--sidebar-width);
            background: #fff;
            position: fixed;
            top: 0;
            left: 0;
            height: 100%;
            z-index: 1000;
            box-shadow: 2px 0 10px rgba(0,0,0,0.05);
            overflow-y: auto;
            transition: 0.3s ease-in-out;
        }

        /* Header: Fixed Top, Starts AFTER Sidebar */
        .dashboard-header {
            height: var(--header-height);
            background: #fff;
            padding: 0 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: fixed;
            top: 0;
            right: 0;
            left: var(--sidebar-width); /* Pushed right to avoid overlap */
            z-index: 900;
            box-shadow: 0 2px 5px rgba(0,0,0,0.02);
            transition: 0.3s ease-in-out;
        }

        /* Main Content: Offset from Sidebar & Header */
        .main-content {
            margin-left: var(--sidebar-width); /* Push content right */
            padding-top: var(--header-height); /* Push content down */
            min-height: 100vh;
            transition: 0.3s ease-in-out;
            padding: 100px 30px 30px; /* Internal spacing */
        }

        /* Mobile Responsive Layout */
        @media (max-width: 991px) {
            .sidebar { left: -260px; } /* Hide Sidebar */
            .sidebar.active { left: 0; } /* Show on Toggle */
            
            .main-content { margin-left: 0; } /* Full width content */
            .dashboard-header { left: 0; width: 100%; } /* Full width header */
            
            #menuToggle { display: block !important; }
        }

        /* =========================================
           FIX 2: BADGE & TABLE STYLING
           ========================================= */
        
        /* Summary Cards */
        .fee-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .fee-card {
            background: #fff; padding: 25px; border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 4px solid transparent;
        }
        .fee-card.total { border-color: var(--primary-color); }
        .fee-card.paid { border-color: var(--success); }
        .fee-card.due { border-color: var(--danger); }
        .fee-card.fine { border-color: var(--warning); }

        .fee-info h3 { margin: 0; font-size: 1.8rem; color: var(--text-dark); }
        .fee-info p { margin: 5px 0 0; color: #777; font-size: 0.9rem; }
        
        .fee-icon {
            width: 50px; height: 50px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem; background: #f8f9fa;
        }
        .total .fee-icon { color: var(--primary-color); background: #e3f2fd; }
        .paid .fee-icon { color: var(--success); background: #d4edda; }
        .due .fee-icon { color: var(--danger); background: #f8d7da; }
        .fine .fee-icon { color: var(--warning); background: #fff3cd; }

        /* Payment Section (Split Layout) */
        .payment-section {
            display: grid; grid-template-columns: 2fr 1fr; gap: 30px; margin-bottom: 30px;
        }
        @media (max-width: 900px) { .payment-section { grid-template-columns: 1fr; } }

        /* Due List Card */
        .due-list-card {
            background: #fff; border-radius: 12px; padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .section-title { font-size: 1.2rem; margin-bottom: 20px; color: var(--text-dark); display: flex; justify-content: space-between; align-items: center; }
        
        .due-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px; border: 1px solid #eee; border-radius: 8px;
            margin-bottom: 15px; transition: 0.3s;
        }
        .due-item:hover { border-color: var(--accent-color); background: #f0f7ff; }
        
        .due-details h4 { margin: 0 0 5px; font-size: 1rem; }
        .due-details p { margin: 0; font-size: 0.85rem; color: #666; }
        .due-amount { font-weight: 700; font-size: 1.1rem; color: var(--danger); }
        .pay-checkbox { width: 20px; height: 20px; cursor: pointer; }

        /* Pay Now Box */
        .pay-now-box {
            background: #fff; border-radius: 12px; padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05); height: fit-content;
            border-top: 5px solid var(--accent-color);
        }
        .pay-summary-row { display: flex; justify-content: space-between; margin-bottom: 15px; font-size: 0.95rem; }
        .pay-total { border-top: 1px dashed #ddd; padding-top: 15px; margin-top: 10px; font-weight: 700; font-size: 1.2rem; color: var(--primary-color); }
        .btn-pay { width: 100%; padding: 12px; border: none; border-radius: 6px; background: var(--success); color: #fff; font-weight: 600; font-size: 1rem; cursor: pointer; margin-top: 20px; transition: 0.3s; }
        .btn-pay:hover { background: #218838; }

        /* Transaction History Table - BADGE FIX IS HERE */
        .history-card {
            background: #fff; border-radius: 12px; padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .table-responsive { overflow-x: auto; }
        .fee-table { width: 100%; border-collapse: collapse; min-width: 700px; }
        
        .fee-table th, .fee-table td {
            text-align: left; padding: 15px;
            border-bottom: 1px solid #eee;
            vertical-align: middle; /* Ensures vertical alignment */
        }
        .fee-table th { background: #f8f9fa; color: #555; font-weight: 600; }
        .fee-table td { color: #333; }

        /* Status Badge Styling - Ensuring they don't overlap */
        .status-badge {
            display: inline-block; /* Prevents overlap */
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            white-space: nowrap; /* Prevents text wrapping */
        }
        .status-success { background: #d4edda; color: #155724; }
        .status-pending { background: #fff3cd; color: #856404; }
        .status-failed { background: #f8d7da; color: #721c24; }

        .btn-invoice {
            padding: 6px 12px; border: 1px solid #ddd; background: #fff;
            border-radius: 4px; cursor: pointer; color: #555; font-size: 0.85rem;
        }
        .btn-invoice:hover { border-color: var(--primary-color); color: var(--primary-color); }

    </style>
</head>
<body>

    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header" style="height: 70px; display: flex; align-items: center; justify-content: center; border-bottom: 1px solid #eee;">
            <h2 style="font-size: 1.5rem; color: var(--primary-color); font-weight: 700;">SVITS <span>ERP</span></h2>
        </div>
        
        <div class="sidebar-menu" style="padding: 20px 0;">
            <p style="font-size: 0.75rem; text-transform: uppercase; color: #999; font-weight: 600; padding: 0 25px; margin: 20px 0 10px;">Academic</p>
            <ul style="list-style: none; padding: 0;">
                <li><a href="student-portal.html" style="display: flex; align-items: center; gap: 15px; padding: 12px 25px; color: #333; text-decoration: none; font-weight: 500; transition: 0.3s; border-left: 4px solid transparent;"><i class="fas fa-th-large" style="width: 20px; text-align: center;"></i> Dashboard</a></li>
                <li><a href="student-timetable.html" style="display: flex; align-items: center; gap: 15px; padding: 12px 25px; color: #333; text-decoration: none; font-weight: 500; transition: 0.3s; border-left: 4px solid transparent;"><i class="far fa-calendar-alt" style="width: 20px; text-align: center;"></i> Timetable</a></li>
                <li><a href="student-grades.html" style="display: flex; align-items: center; gap: 15px; padding: 12px 25px; color: #333; text-decoration: none; font-weight: 500; transition: 0.3s; border-left: 4px solid transparent;"><i class="fas fa-chart-line" style="width: 20px; text-align: center;"></i> Grades & Results</a></li>
                <li><a href="student-assignments.html" style="display: flex; align-items: center; gap: 15px; padding: 12px 25px; color: #333; text-decoration: none; font-weight: 500; transition: 0.3s; border-left: 4px solid transparent;"><i class="fas fa-tasks" style="width: 20px; text-align: center;"></i> Assignments</a></li>
                <li><a href="student-placements.html" style="display: flex; align-items: center; gap: 15px; padding: 12px 25px; color: #333; text-decoration: none; font-weight: 500; transition: 0.3s; border-left: 4px solid transparent;"><i class="fas fa-briefcase" style="width: 20px; text-align: center;"></i> Placements</a></li>
            </ul>

            <p style="font-size: 0.75rem; text-transform: uppercase; color: #999; font-weight: 600; padding: 0 25px; margin: 20px 0 10px;">Administrative</p>
            <ul style="list-style: none; padding: 0;">
                <li><a href="student-fees.html" style="display: flex; align-items: center; gap: 15px; padding: 12px 25px; background: #eef7ff; color: var(--primary-color); border-left: 4px solid var(--accent-color); text-decoration: none; font-weight: 500;"><i class="fas fa-wallet" style="width: 20px; text-align: center;"></i> Fee Status</a></li>
                <li><a href="library.html" style="display: flex; align-items: center; gap: 15px; padding: 12px 25px; color: #333; text-decoration: none; font-weight: 500; transition: 0.3s; border-left: 4px solid transparent;"><i class="fas fa-book" style="width: 20px; text-align: center;"></i> Digital Library</a></li>
            </ul>

            <p style="font-size: 0.75rem; text-transform: uppercase; color: #999; font-weight: 600; padding: 0 25px; margin: 20px 0 10px;">Campus Life</p>
            <ul style="list-style: none; padding: 0;">
                <li><a href="canteen.html" style="display: flex; align-items: center; gap: 15px; padding: 12px 25px; color: #333; text-decoration: none; font-weight: 500; transition: 0.3s; border-left: 4px solid transparent;"><i class="fas fa-utensils" style="width: 20px; text-align: center;"></i> Canteen</a></li>
                <li><a href="transport.html" style="display: flex; align-items: center; gap: 15px; padding: 12px 25px; color: #333; text-decoration: none; font-weight: 500; transition: 0.3s; border-left: 4px solid transparent;"><i class="fas fa-bus" style="width: 20px; text-align: center;"></i> Transport</a></li>
                <li><a href="grievance.html" style="display: flex; align-items: center; gap: 15px; padding: 12px 25px; color: #333; text-decoration: none; font-weight: 500; transition: 0.3s; border-left: 4px solid transparent;"><i class="fas fa-exclamation-circle" style="width: 20px; text-align: center;"></i> Grievance</a></li>
            </ul>
            
            <div style="margin-top: 30px; padding: 0 25px;">
                <a href="login.html" style="color: #dc3545; font-weight: 600; display: flex; align-items: center; gap: 10px; text-decoration: none;">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </div>
        </div>
    </aside>

    <main class="main-content">
        
        <header class="dashboard-header">
            <div style="display: flex; align-items: center; gap: 15px;">
                <i class="fas fa-bars" id="menuToggle" style="cursor: pointer; font-size: 1.2rem; color: #555; display: none;"></i>
                <h3 style="margin: 0; color: var(--text-dark); font-size: 1.2rem;">Fee Management</h3>
            </div>
            <div class="user-profile" style="display: flex; align-items: center; gap: 10px;">
                <img src="avatar.png" style="width: 40px; height: 40px; border-radius: 50%;">
                <div style="display: none; @media(min-width:768px){display:block;}">
                    <h4 style="margin: 0; font-size: 0.9rem;">Kartik Bais</h4>
                    <small style="color: #777;">0827CS221045</small>
                </div>
            </div>
        </header>

        <div class="fee-stats-grid">
            <div class="fee-card total">
                <div class="fee-info">
                    <h3>₹ 85,000</h3>
                    <p>Total Annual Fee</p>
                </div>
                <div class="fee-icon"><i class="fas fa-coins"></i></div>
            </div>
            <div class="fee-card paid">
                <div class="fee-info">
                    <h3>₹ 45,000</h3>
                    <p>Paid Amount</p>
                </div>
                <div class="fee-icon"><i class="fas fa-check-circle"></i></div>
            </div>
            <div class="fee-card due">
                <div class="fee-info">
                    <h3>₹ 40,000</h3>
                    <p>Pending Due</p>
                </div>
                <div class="fee-icon"><i class="fas fa-exclamation-circle"></i></div>
            </div>
            <div class="fee-card fine">
                <div class="fee-info">
                    <h3>₹ 500</h3>
                    <p>Late Fine</p>
                </div>
                <div class="fee-icon"><i class="fas fa-file-invoice-dollar"></i></div>
            </div>
        </div>

        <div class="payment-section">
            
            <div class="due-list-card">
                <div class="section-title">
                    <span>Outstanding Dues</span>
                    <span style="font-size: 0.85rem; background: #eee; padding: 4px 10px; border-radius: 20px;">Semester 4</span>
                </div>

                <div class="due-item">
                    <div style="display: flex; gap: 15px; align-items: center;">
                        <input type="checkbox" class="pay-checkbox" checked onchange="updateTotal()">
                        <div class="due-details">
                            <h4>Tuition Fee Installment 2</h4>
                            <p>Due Date: 20 Jan 2026</p>
                        </div>
                    </div>
                    <span class="due-amount">₹ 35,000</span>
                </div>

                <div class="due-item">
                    <div style="display: flex; gap: 15px; align-items: center;">
                        <input type="checkbox" class="pay-checkbox" checked onchange="updateTotal()">
                        <div class="due-details">
                            <h4>Bus Transport Fee (Sem 4)</h4>
                            <p>Due Date: 20 Jan 2026</p>
                        </div>
                    </div>
                    <span class="due-amount">₹ 5,000</span>
                </div>

                <div class="due-item">
                    <div style="display: flex; gap: 15px; align-items: center;">
                        <input type="checkbox" class="pay-checkbox" onchange="updateTotal()">
                        <div class="due-details">
                            <h4>Library Fine (Late Return)</h4>
                            <p>Due Date: Immediate</p>
                        </div>
                    </div>
                    <span class="due-amount">₹ 500</span>
                </div>
            </div>

            <div class="pay-now-box">
                <h4 style="margin-top: 0; color: var(--text-dark);">Payment Summary</h4>
                
                <div class="pay-summary-row">
                    <span>Selected Items</span>
                    <span id="itemCount">2</span>
                </div>
                <div class="pay-summary-row">
                    <span>Subtotal</span>
                    <span id="subTotal">₹ 40,000</span>
                </div>
                <div class="pay-summary-row" style="color: var(--success);">
                    <span>Convenience Fee</span>
                    <span>Free</span>
                </div>
                
                <div class="pay-summary-row pay-total">
                    <span>Total Payable</span>
                    <span id="grandTotal">₹ 40,000</span>
                </div>

                <button class="btn-pay" onclick="processPayment()">
                    <i class="fas fa-lock"></i> Pay Securely
                </button>
                <div style="text-align: center; margin-top: 15px;">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg" width="50" style="opacity: 0.6; margin: 0 5px;">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg" width="40" style="opacity: 0.6; margin: 0 5px;">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg" width="40" style="opacity: 0.6; margin: 0 5px;">
                </div>
            </div>
        </div>

        <div class="history-card">
            <div class="section-title">
                <span>Payment History</span>
                <button class="btn-invoice" style="border: none; background: #e3f2fd; color: var(--primary-color);">
                    <i class="fas fa-download"></i> Statement
                </button>
            </div>
            
            <div class="table-responsive">
                <table class="fee-table">
                    <thead>
                        <tr>
                            <th>Receipt No</th>
                            <th>Date</th>
                            <th>Description</th>
                            <th>Mode</th>
                            <th>Amount</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>#REC-2025-001</td>
                            <td>15 Aug 2025</td>
                            <td>Tuition Fee Installment 1</td>
                            <td>Net Banking</td>
                            <td>₹ 45,000</td>
                            <td><span class="status-badge status-success">Successful</span></td>
                            <td><button class="btn-invoice"><i class="fas fa-download"></i></button></td>
                        </tr>
                        <tr>
                            <td>#REC-2025-002</td>
                            <td>20 Aug 2025</td>
                            <td>Exam Form Fee (Sem 3)</td>
                            <td>UPI</td>
                            <td>₹ 1,500</td>
                            <td><span class="status-badge status-success">Successful</span></td>
                            <td><button class="btn-invoice"><i class="fas fa-download"></i></button></td>
                        </tr>
                        <tr>
                            <td>#REC-FAILED</td>
                            <td>10 Jan 2026</td>
                            <td>Tuition Fee Installment 2</td>
                            <td>Card</td>
                            <td>₹ 35,000</td>
                            <td><span class="status-badge status-failed">Failed</span></td>
                            <td><button class="btn-invoice" disabled style="opacity: 0.5;">-</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </main>

    <script>
        // Sidebar Toggle
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');
        if(menuToggle) {
            menuToggle.addEventListener('click', () => {
                sidebar.classList.toggle('active');
            });
        }

        // Mock Payment Calculation
        function updateTotal() {
            let total = 0;
            let count = 0;
            const checkboxes = document.querySelectorAll('.pay-checkbox');
            const amounts = [35000, 5000, 500]; // Hardcoded for demo

            checkboxes.forEach((box, index) => {
                if (box.checked) {
                    total += amounts[index];
                    count++;
                }
            });

            document.getElementById('itemCount').innerText = count;
            document.getElementById('subTotal').innerText = "₹ " + total.toLocaleString();
            document.getElementById('grandTotal').innerText = "₹ " + total.toLocaleString();
        }

        function processPayment() {
            const amount = document.getElementById('grandTotal').innerText;
            if(amount === "₹ 0") {
                alert("Please select at least one item to pay.");
            } else {
                alert("Redirecting to Payment Gateway for " + amount + "...");
            }
        }
    </script>

</body>
</html>